version: 2
jobs:
  build:
    docker:
      - image: circleci/node:6-browsers
    steps:
      - checkout
	- run:
		name: install-dependencies
		command: yarn install
	- run:
		name: angular-build
		command: yarn ng -- build --prod --aot --no-progress
      	- run:
		name: angular-test
		command: yarn test -- --single-run --no-progress
	- run: cd front
	- run: npm install -g karma
	- run: npm install karma-jasmine karma-chrome-launcher jasmine-core --save-dev
	- run: npm install -g karma-cli
	- run: karma start
	- run: karma test
